<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>תמלול עברית AI - Hebrew Audio Transcription</title>
    <meta name="description" content="תמלול אודיו לטקסט בעברית באמצעות בינה מלאכותית">
    <link rel="stylesheet" href="styles/main.css">
</head>
<body>
    <div class="container">
        <div class="header">
            <h1 class="title">תמלול עברית AI</h1>
            <p class="subtitle">המר אודיו לטקסט בעברית באמצעות בינה מלאכותית מתקדמת</p>
        </div>

        <div class="info-box">
            <div class="info-text">מוכן לשימוש! 🚀</div>
            <div class="info-subtext">הזן את מפתח OpenAI API שלך למטה והתחל לתמלל</div>
        </div>

        <div class="options">
            <div class="option-group">
                <label class="option-label">🤖 שירות תמלול</label>
                <select id="transcriptionService" class="api-input" style="padding: 12px;">
                    <option value="openai" selected>OpenAI Whisper</option>
                    <option value="ivrit-ai">ivrit.ai (מומחה לעברית)</option>
                </select>
            </div>

            <div class="option-group" id="openAiGroup">
                <label class="option-label">🔑 מפתח OpenAI API</label>
                <input type="password" id="apiKey" class="api-input" placeholder="sk-proj-..." 
                       autocomplete="off" spellcheck="false">
                <small style="color: #666;">המפתח נשמר בזיכרון הדפדפן ולא נשלח לאף מקום אחר</small>
            </div>

            <div class="option-group" id="ivritAiGroup" style="display: none;">
                <label class="option-label">🚀 הגדרות ivrit.ai</label>
                
                <input type="password" id="runpodApiKey" class="api-input" placeholder="RunPod API Key" 
                       autocomplete="off" spellcheck="false">
                
                <input type="text" id="endpointId" class="api-input" placeholder="Endpoint ID (לדוגמה: p8ku15ov44l7vj)" 
                       autocomplete="off" spellcheck="false">
                
                <input type="url" id="workerUrl" class="api-input" placeholder="כתובת Cloudflare Worker" 
                       autocomplete="off" spellcheck="false">
                
                <small style="color: #666;">הנתונים נשמרים בדפדפן ולא נשלחים למקום אחר</small>
            </div>

            <div class="option-group" id="languageGroup">
                <label class="option-label">🌐 שפת תמלול</label>
                <select id="languageSelect" class="api-input" style="padding: 12px;">
                    <option value="auto">זיהוי אוטומטי</option>
                    <option value="he" selected>עברית</option>
                    <option value="en">English</option>
                    <option value="ar">العربية</option>
                    <option value="ru">Русский</option>
                    <option value="es">Español</option>
                    <option value="fr">Français</option>
                    <option value="de">Deutsch</option>
                    <option value="it">Italiano</option>
                    <option value="pt">Português</option>
                    <option value="zh">中文</option>
                    <option value="ja">日本語</option>
                    <option value="ko">한국어</option>
                    <option value="hi">हिन्दी</option>
                    <option value="tr">Türkçe</option>
                    <option value="pl">Polski</option>
                    <option value="nl">Nederlands</option>
                    <option value="sv">Svenska</option>
                    <option value="da">Dansk</option>
                    <option value="no">Norsk</option>
                    <option value="fi">Suomi</option>
                </select>
            </div>
        </div>

        <div class="upload-area" id="uploadArea">
            <div class="upload-icon">🎤</div>
            <div class="upload-text">גרור קובץ אודיו לכאן או לחץ לבחירה</div>
            <div class="upload-subtext">תומך ב-MP3, WAV, M4A, MP4, WEBM, FLAC (עד 25MB)</div>
            <button class="button select-button" onclick="document.getElementById('fileInput').click();">בחר קובץ</button>
            <input type="file" id="fileInput" class="file-input" accept="audio/*,video/*">
        </div>

        <div class="file-info" id="fileInfo">
            <div class="file-name" id="fileName"></div>
            <div class="file-size" id="fileSize"></div>
        </div>

        <div class="audio-preview" id="audioPreview">
            <div class="audio-controls">
                <audio controls class="audio-player" id="audioPlayer"></audio>
            </div>
            <div class="canvas-container">
                <canvas class="waveform-canvas" id="waveformCanvas" width="600" height="100"></canvas>
            </div>
        </div>

        <div class="options">
            <div class="option-group">
                <label class="option-label">🔧 הגדרות עיבוד אודיו</label>
                
                <div class="option-row">
                    <span>הפעל מסנן רעשים</span>
                    <div class="toggle active" id="noiseReductionToggle"></div>
                </div>
                
                <div class="slider-container" id="noiseSliderContainer">
                    <span>רמת מסנן רעשים:</span>
                    <input type="range" class="slider" id="noiseReductionLevel" min="0" max="100" value="30">
                    <span class="slider-value" id="noiseReductionValue">30%</span>
                </div>
                
                <div class="option-row">
                    <span>נרמול עוצמת קול</span>
                    <div class="toggle active" id="normalizeToggle"></div>
                </div>
                
                <div class="slider-container" id="volumeSliderContainer">
                    <span>עוצמת קול יעד:</span>
                    <input type="range" class="slider" id="volumeLevel" min="50" max="150" value="100">
                    <span class="slider-value" id="volumeValue">100%</span>
                </div>

                <button class="button process-button" id="processButton" disabled style="width: 100%; margin-top: 15px; padding: 12px;">עבד אודיו</button>
            </div>

            <div class="option-group">
                <label class="option-label">📝 הגדרות תמלול</label>
                
                <div class="option-row">
                    <span>חותמות זמן</span>
                    <div class="toggle" id="timestampToggle"></div>
                </div>
                
                <div class="option-row">
                    <span>זיהוי משתתפים</span>
                    <div class="toggle" id="speakerToggle"></div>
                </div>
                
                <div class="option-row">
                    <span>הצג כפסקאות</span>
                    <div class="toggle" id="paragraphToggle"></div>
                </div>
            </div>
        </div>

        <button class="button transcribe-button" id="transcribeButton" disabled>התחל תמלול</button>

        <div class="progress-bar" id="progressBar">
            <div class="progress-fill" id="progressFill"></div>
        </div>

        <div class="loading-spinner" id="loadingSpinner"></div>
        <div class="status" id="status"></div>

        <div class="result-area" id="resultArea">
            <div class="result-header">
                <div class="result-title">תוצאת התמלול</div>
                <div class="result-actions">
                    <button class="button copy-button" id="copyButton">העתק הכל</button>
                    <button class="button download-button" id="downloadTxtButton">הורד כ-TXT</button>
                    <button class="button download-button vtt" id="downloadVttButton">הורד כ-VTT</button>
                </div>
            </div>
            <div class="result-actions" style="margin-top: 15px; justify-content: flex-end;">
                <select id="improveModelSelect" class="api-input" style="width: auto; margin-bottom: 0;">
                    <option value="gpt-4o" selected>GPT-4o</option>
                    <option value="gpt-3.5-turbo">GPT-3.5 Turbo</option>
                </select>
                <button class="button process-button" id="improveButton" style="display: none;">🔧 תיקון אוטומטי</button>
            </div>
            <div class="transcript-text" id="transcriptText" contenteditable="true" style="margin-top: 15px;"></div>
            <div class="transcript-text" id="improvedText" contenteditable="true" style="display: none; margin-top: 15px; border-right-color: #28a745;">
                <div style="font-weight: bold; margin-bottom: 10px; color: #28a745;">✨ טקסט מתוקן:</div>
            </div>
        </div>

        <button id="resetButton" class="reset-button">איפוס מלא</button>
    </div>

    <!-- Load scripts -->
    <script src="scripts/storage.js"></script>
    <script src="scripts/audio-processor.js"></script>
    <script src="scripts/waveform.js"></script>
    <script src="scripts/ui-helpers.js"></script>
    <script src="scripts/file-handler.js"></script>
    <script src="scripts/transcription.js"></script>
    <script src="scripts/text-improvement.js"></script>
    <script src="scripts/export-download.js"></script>
    <script src="scripts/ivrit-transcription.js"></script>
    <script src="scripts/event-listeners.js"></script>
    <script src="scripts/main.js"></script>
</body>
</html>
